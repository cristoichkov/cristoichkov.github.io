<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Dplyr </title>
  <meta name="description" content="Soy candidato a Doctor en Ciencias Biológicas en el Jardín Botánico del IB-UNAM bajo la tutoría del Dr. Salvador Arias. Mi proyecto tiene como objetivo principal establecer los límites taxonómicos al interior de Mammillaria haageana y entre especies de la serie Supertextae. A lo largo de mi formación académica desarrolle un interés particular en la ciencia de datos y me he especializado específicamente en el programa R, por ello en este sitio web encontrarás apuntes sobre el manejo y uso de R.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Dplyr" />
<meta property="og:description" content="El paquete dplyr ofrece un conjunto de herramientas para la manipulación de datos" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cristoichkov.github.io/apuntes_R/dplyr/" />
<meta property="article:published_time" content="2020-06-06T09:00:00+00:00" />
<meta property="article:modified_time" content="2020-06-06T09:00:00+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dplyr"/>
<meta name="twitter:description" content="El paquete dplyr ofrece un conjunto de herramientas para la manipulación de datos"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://cristoichkov.github.io/css/style-white.css">
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://cristoichkov.github.io/images/favicon.ico" />

  
  
  
</head>
<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Inicio</a></li>
         
        <li><a href="/apuntes_R">Apuntes sobre R</a></li>
         
        <li><a href="/temas">Temas</a></li>
         
        <li><a href="/conoceme">Conóceme</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://cristoichkov.github.io/posts/2020-05-01-algorithms-graphs/">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcristoichkov.github.io%2fapuntes_R%2fmatrices%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fcristoichkov.github.io%2fapuntes_R%2fmatrices%2f&text=Matrices">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents"></nav>
    </div>
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Dplyr
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2020-09-20 09:00:00 &#43;0000 UTC" itemprop="datePublished">2020-11-03</time>
          
        </div>
        
          <!--
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/notes">notes</a>
            
        </div>
        -->
        
    
          <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/temas/tidyverse/" rel="tag">Tidyverse</a>
            
        </div> 
        
      </div>
    </header>

  
    <div class="content" itemprop="articleBody">
        
       <a href="https://dplyr.tidyverse.org"><img src="https://d33wubrfki0l68.cloudfront.net/621a9c8c5d7b47c4b6d72e8f01f28d14310e8370/193fc/css/images/hex/dplyr.png" alt="dplyr hex sticker" width="100" class="r1 c0"></a>
        


<p> El paquete <b><code>dplyr</code></b> ofrece un conjunto de herramientas para la manipulación de datos, aunque estas tareas también pueden ser llevadas a cabo con el paquete base de R, la simplicidad que provee <b><code>dplyr</code></b> facilita y agilizara tales operaciones.  </p> 
        
<p>Las funciones principales que provee el paquete dplyr son:</p>
        <ul>
            <li><b><code>select</code></b>: devuelve solo las columnas indicadas.</li>
            <li><b><code>filter</code></b>: permite filtrar filas según una expresión lógica.</li>
            <li><b><code>arrange</code></b>: ordena las filas en función de los valores de una o más columnas.</li>
            <li><b><code>rename</code></b>: permite cambiar el nombre de una columna.</li>
            <li><b><code>mutate</code></b>: permite agregar una nueva columna o transformar una existente.</li>
            <li><b><code>distinct</code></b>: remueve las filas con valores duplicados.</li>
            <li><b><code>%>%</code></b>: permite realizar resúmenes estadísticos de variables.</li>
            <li><b><code>summarise</code></b>: permite realizar resúmenes estadísticos de variables.</li>
        </ul>
   
  <p> Para mostrar el funcionamiento de <b><code>dplyr</code></b> descargaremos 1000 registros para el género <i>Mammillaria</i> de la base de datos  <a href="https://www.gbif.org/what-is-gbif">GBIF (the Global Biodiversity Information Facility)</a>.</p>  
        
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Cargar el paquete  rgbif</span>
<span style="color:#d887b4">library</span><span style="color:#c05c30">(</span><span style="color:#ffffff">rgbif</span><span style="color:#c05c30">)</span>
<span style="color:#a5a6aa">## Obtener 1000 registros de GBIF para el género Mammillaria</span> 
<span style="color:#ffffff">Mammillaria</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">occ_search</span><span style="color:#c05c30">(</span><span style="color:#ffffff">scientificName</span> <span style="color:#7fa7bb">=</span> <span style="color:#bdad6e">"Mammillaria"</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">limit</span> <span style="color:#7fa7bb">=</span> <span style="color:#bdad6e">1000</span><span style="color:#c05c30">)</span>
<span style="color:#a5a6aa">## Asignar a una variable el componente data de la lista Mammillaria</span> 
<span style="color:#ffffff">Mammillaria_gbif</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">Mammillaria</span><span style="color:#7fa7bb">$</span><span style="color:#ffffff">data</span>
</code></pre></div>
      
<b><code>select()</code></b>        
  <p>La base de datos de <i>Mammillaria</i> contiene 1000 observaciones y 92 variables, a veces no es necesario trabajar con todas las variables y podemos seleccionar solo aquellas con las que deseamos trabajar para simplificar nuestra base de datos.</p>     

        
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Cargar el paquete  dplyr</span>
<span style="color:#d887b4">library</span><span style="color:#c05c30">(</span><span style="color:#ffffff">dplyr</span><span style="color:#c05c30">)</span>
<span style="color:#a5a6aa">## Seleccionar las variables con las que vamos a trabar y asignamos el nuevo conjunto a Mammillaria_1</span>
<span style="color:#ffffff">Mammillaria_1</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">select</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_gbif</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">family</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">species</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLongitude</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">country</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">stateProvince</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">year</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">month</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">day</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">verbatimLocality</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">recordedBy</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">identifiedBy</span><span style="color:#c05c30">)</span>
</code></pre></div>
        
 <b><code>filter()</code></b>        
  <p>Continuando con la depuración de nuestra base de datos, posiblemente tendremos que filtrar filas para conservar a las que satisfacen las condiciones dadas. Para conservarse, la fila debe producir un valor de VERDADERO para todas las condiciones. Existen operadores y funciones que son útiles al construir las expresiones utilizadas para filtrar los datos: </p>   
        
        <div id="mostrar_tabla">
       <table class="table table-striped" id="tabla" name="tabla" style="font-size: 10pt">
       <tr>
          <th style="text-align:center">Operador</th>
          <th style="text-align:center">Descripción</th>
       </tr>
            <tr>
                <td style="text-align:center"><code>&lt;</code></td>
                <td style="text-align:center">menor que</td>
           </tr>
           <tr>
                <td style="text-align:center"><code>&lt;=</code></td>
                <td style="text-align:center">Menor o igual</td>
           </tr>
            <tr>
                <td style="text-align:center"><code>&gt;</code></td>
               <td style="text-align:center">Mayor que</td>
           </tr>
            <tr>
                <td style="text-align:center"><code>&gt;=</code></td>
                <td style="text-align:center">Menor o igual</td>
           </tr>
           <tr>
               <td style="text-align:center"><code>==</code></td>
                <td style="text-align:center">Igual</td>
           </tr>
           <tr>
               <td style="text-align:center"><code>!=</code></td>
                <td style="text-align:center">Distindo de</td>
           </tr>
           
            <tr>
               <td style="text-align:center"><code>%in%</code></td>
                <td style="text-align:center">Identificar si un elemento pertenece a un vector o data frame</td>
           </tr>

           <tr>
           </tr>
       </table>
</div>       

<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Filtrar las especies de Mammillaria que esten en el estado de Puebla</span>  
<span style="color:#ffffff">Mammillaria_2</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">filter</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">stateProvince</span> <span style="color:#7fa7bb">==</span> <span style="color:#bdad6e">"Puebla"</span><span style="color:#c05c30">)</span>
<span style="color:#a5a6aa">## Filtrar las especies de Mammillaria que esten en latitudes menores a 21°</span>
<span style="color:#ffffff">Mammillaria_3</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">filter</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLatitude</span> <span style="color:#7fa7bb">&#60</span> <span style="color:#bdad6e">21</span><span style="color:#c05c30">)</span>
<span style="color:#a5a6aa">## Filtrar las especies de 	Mammillaria haageana, Mammillaria carnea y Mammillaria haageana</span>
<span style="color:#a5a6aa">## Crear un vector con las especies antes mencionadas</span>
<span style="color:#ffffff">Mammillaria_vec</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">c</span><span style="color:#c05c30">(</span><span style="color:#bdad6e">"Mammillaria karwinskiana"</span><span style="color:#ffffff">,</span> <span style="color:#bdad6e">"Mammillaria carnea"</span><span style="color:#ffffff">,</span> <span style="color:#bdad6e">"Mammillaria haageana"</span><span style="color:#c05c30">)</span>
<span style="color:#a5a6aa">## Utilizar %in% para filtrar las especies contenidas en el vector Mammillaria_vec</span>
<span style="color:#ffffff">Mammillaria_4</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">filter</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">species</span> <span style="color:#7fa7bb">%in%</span> <span style="color:#ffffff">Mammillaria_vec</span><span style="color:#c05c30">)</span>
</code></pre></div>   
        
<p>Muchas veces nuestras bases de datos tendrán datos ausentes (NAs) y será necesario eliminar esos registros. </p>        
        
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Eliminar NAs de decimalLatitude con ayuda de la funcion is.na()</span> 
<span style="color:#ffffff">Mammillaria_5</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">filter</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#7fa7bb">!</span><span style="color:#ffffff">is.na</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLatitude</span><span style="color:#c05c30">)</span><span style="color:#c05c30">)</span>
</code></pre></div>   
        
<p>En el caso de que tengamos múltiples argumentos para hacer un filtrado podemos utilizar los operadores boléanos como lo muestra la siguiente imagen: </p>        
        
<img src="../../images/boolean.png" width="650">

<p>Por ejemplo, supongamos que <b><code>x</code></b> es la especie <i>Mammillaria haageana</i> y que <b><code>y</code></b> es el estado de Oaxaca.</p>
        
        <ul>
            <li><code>y & !x</code>: que el estado se igual a Oaxaca pero distinto de  <i>Mammillaria haageana</i>.</li>
            <li><code>x</code>: que la especie sea igual a <i>Mammillaria haageana</i>. </li>
            <li><code>x | y</code>: que la especie sea igual a <i>Mammillaria haageana</i> o que el estado se igual a Oaxaca.</li>
            <li><code>x & y</code>: que la especie sea igual a <i>Mammillaria haageana</i> y que el estado se igual a Oaxaca.</li>
            <li><code>xor(x, y)</code>: devolverá todas las filas donde solo se cumpla una de las condiciones, y no cuando se cumplan ambas condiciones.</li>
            <li><code>x & !y</code>: que la especie sea igual a <i>Mammillaria haageana</i> pero distinto de Oaxaca.</li>
            <li><code>x</code>: que el estado se igual a Oaxaca. </li>
        </ul>
        
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Filtrar las filas que sean iguales al estado de Oaxaca y a la especie Mammillaria haageana</span> 
<span style="color:#ffffff">Mammillaria_6</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">filter</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">stateProvince</span> <span style="color:#7fa7bb">==</span> <span style="color:#bdad6e">"Oaxaca"</span> <span style="color:#7fa7bb">&</span>  <span style="color:#ffffff">species</span> <span style="color:#7fa7bb">==</span> <span style="color:#bdad6e">"Mammillaria haageana"</span><span style="color:#c05c30">)</span>
<span style="color:#a5a6aa">## Filtrar las filas que sean iguales al estado de Oaxaca o a la especie Mammillaria haageana</span> 
<span style="color:#ffffff">Mammillaria_7</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">filter</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">stateProvince</span> <span style="color:#7fa7bb">==</span> <span style="color:#bdad6e">"Oaxaca"</span> <span style="color:#7fa7bb">|</span>  <span style="color:#ffffff">species</span> <span style="color:#7fa7bb">==</span> <span style="color:#bdad6e">"Mammillaria haageana"</span><span style="color:#c05c30">)</span>
</code></pre></div>   
        
<b><code>arrange()</code></b>         
 
<p>También podemos ordenar las filas por los valores de las columnas seleccionadas.</p>    
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Ordenar de forma ascendente la latitud  </span>  
<span style="color:#ffffff">Mammillaria_8</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">arrange</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLatitude</span><span style="color:#c05c30">)</span>
<span style="color:#a5a6aa">## Ordenar de forma descendente la latitud </span>
<span style="color:#ffffff">Mammillaria_9</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">arrange</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">desc</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLatitude</span><span style="color:#c05c30">)</span><span style="color:#c05c30">)</span>
<span style="color:#a5a6aa">## Ordenar de forma ascendente por especie y la latitud  </span>  
<span style="color:#ffffff">Mammillaria_10</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">arrange</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">species</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLatitude</span><span style="color:#c05c30">)</span>
</code></pre></div> 
        
<b><code>rename()</code></b>        

<p>Al igual que en la base de R podemos cambia los nombres de variables o columnas.</p>
        

        
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Cambiar el nombre de la variable family y species </span>  
<span style="color:#ffffff">Mammillaria_11</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">rename</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">Familia</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">family</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">Especie</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">species</span><span style="color:#c05c30">)</span>
</code></pre></div>    
        
<b><code>mutate()</code></b>         
 
<p>Se pueden agregar nuevas variables a la base de datos a partir de las ya existentes.</p>
        
        
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Crear una funcion para convertir grados decimales a grados, minutos y segundos</span>
<span style="color:#ffffff">dd2dms</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#d887b4">function</span><span style="color:#c05c30">(</span><span style="color:#ffffff">d1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">var</span><span style="color:#c05c30">)</span><span style="color:#c05c30">{</span>
    <span style="color:#ffffff">left1</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">d1</span> <span style="color:#7fa7bb">*</span> <span style="color:#bdad6e">3600</span>
    <span style="color:#ffffff">degs</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">trunc</span><span style="color:#c05c30">(</span><span style="color:#ffffff">left1</span><span style="color:#7fa7bb">/</span><span style="color:#bdad6e">3600</span><span style="color:#c05c30">)</span>
    <span style="color:#ffffff">left2</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">left1</span> <span style="color:#7fa7bb">-</span> <span style="color:#ffffff">degs</span> <span style="color:#7fa7bb">*</span> <span style="color:#bdad6e">3600</span>
    <span style="color:#ffffff">mins</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">trunc</span><span style="color:#c05c30">(</span><span style="color:#ffffff">left2</span><span style="color:#7fa7bb">/</span><span style="color:#bdad6e">60</span><span style="color:#c05c30">)</span>
    <span style="color:#ffffff">osec</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">left2</span> <span style="color:#7fa7bb">-</span> <span style="color:#ffffff">mins</span> <span style="color:#7fa7bb">*</span> <span style="color:#c05c30">(</span><span style="color:#bdad6e">60</span><span style="color:#c05c30">)</span>
    <span style="color:#d887b4">if</span> <span style="color:#c05c30">(</span><span style="color:#ffffff">var</span> <span style="color:#7fa7bb">==</span> <span style="color:#bdad6e">"d"</span><span style="color:#c05c30">)</span><span style="color:#c05c30">{</span>
        <span style="color:#d887b4">return</span><span style="color:#c05c30">(</span><span style="color:#ffffff">degs</span><span style="color:#c05c30">)</span>
    <span style="color:#c05c30">}</span> <span style="color:#d887b4">else if</span> <span style="color:#c05c30">(</span><span style="color:#ffffff">var</span> <span style="color:#7fa7bb">==</span> <span style="color:#bdad6e">"m"</span><span style="color:#c05c30">)</span><span style="color:#c05c30">{</span>
        <span style="color:#d887b4">return</span><span style="color:#c05c30">(</span><span style="color:#ffffff">mins</span><span style="color:#c05c30">)</span>
    <span style="color:#c05c30">}</span> <span style="color:#d887b4">else</span> <span style="color:#c05c30">{</span>
        <span style="color:#d887b4">return</span><span style="color:#c05c30">(</span><span style="color:#ffffff">osec</span><span style="color:#c05c30">)</span>
    <span style="color:#c05c30">}</span>
<span style="color:#c05c30">}</span>
<span style="color:#a5a6aa">## Convertir latitud en grados decimales a grados, minutos y segundos</span>    
<span style="color:#ffffff">Mammillaria_12</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">mutate</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">Lat_gra</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">dd2dms</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#bdad6e">"d"</span><span style="color:#c05c30">)</span><span style="color:#ffffff">,</span> 
                         <span style="color:#ffffff">Lat_min</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">dd2dms</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#bdad6e">"m"</span><span style="color:#c05c30">)</span><span style="color:#ffffff">,</span> 
                         <span style="color:#ffffff">Lat_seg</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">dd2dms</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#bdad6e">"s"</span><span style="color:#c05c30">)</span><span style="color:#c05c30">)</span>    
</code></pre></div>            

        
<b><code>distinct()</code></b>   

<p>Sirve para eliminar filas duplicadas y quedarnos con filas únicas.</p>        
    
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Eliminar los estados repetidos y quedarnos con solo un solo estado por fila </span>   
<span style="color:#ffffff">Mammillaria_13</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">distinct</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Mammillaria_1</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">stateProvince</span><span style="color:#c05c30">)</span>
</code></pre></div>     
        
  <a href="https://magrittr.tidyverse.org/"><img src="../../images/magrittr.png" alt="dplyr hex sticker" width="100" class="r1 c0"></a>  
        
<p>El paquete <b><code>magrittr</code></b> ofrece un conjunto de operadores que hacen que su código sea más legible. En informática, una tubería (pipeline) consiste en una cadena de procesos conectados de forma tal que la salida de un proceso es la entrada del próximo. Dentro de <b><code>magrittr</code></b> el operador <b><code>%>%</code></b> es el utilizado como tubería para conectar varios procesos en uno.</p>

        
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Utilizar el operador %>% para seleccionar columnas,
## filtrar, crear nuevas variable y eliminar filas dulicadas</span>   
<span style="color:#ffffff">Mammillaria_14</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">Mammillaria_gbif</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">select</span><span style="color:#c05c30">(</span><span style="color:#ffffff">family</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">species</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLongitude</span><span style="color:#ffffff">,</span>
    <span style="color:#ffffff">country</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">stateProvince</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">year</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">month</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">day</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">verbatimLocality</span><span style="color:#ffffff">,</span> 
    <span style="color:#ffffff">recordedBy</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">identifiedBy</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">filter</span><span style="color:#c05c30">(</span><span style="color:#ffffff">stateProvince</span> <span style="color:#7fa7bb">==</span> <span style="color:#bdad6e">"Puebla"</span> <span style="color:#7fa7bb">&</span>  <span style="color:#ffffff">species</span> <span style="color:#7fa7bb">==</span> <span style="color:#bdad6e">"Mammillaria haageana"</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">mutate</span><span style="color:#c05c30">(</span><span style="color:#ffffff">Lat_gra</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">dd2dms</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#bdad6e">"d"</span><span style="color:#c05c30">)</span><span style="color:#ffffff">,</span> 
           <span style="color:#ffffff">Lat_min</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">dd2dms</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#bdad6e">"m"</span><span style="color:#c05c30">)</span><span style="color:#ffffff">,</span> 
           <span style="color:#ffffff">Lat_seg</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">dd2dms</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#bdad6e">"s"</span><span style="color:#c05c30">)</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">distinct</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">.keep_all</span> <span style="color:#7fa7bb">=</span> <span style="color:#d5b1e7">TRUE</span><span style="color:#c05c30">)</span>
</code></pre></div> 

<p><b><code>group_by()</code></b>, <b><code>count()</code></b> y <b><code>summarise()</code></b></p>       
    
<p><b><code>group_by()</code></b> toma un data frame o un tibble existente y la convierte en una conjunto agrupado donde las operaciones se realizan "por grupo". <b><code>count()</code></b> es una función que se utiliza para hacer conteos o sumas (n) utilizando a <b><code>group_by()</code></b> para realizar las operaciones. <b><code>summarise()</code></b> crea un nuevo marco de datos que tendrá una (o más) filas para cada combinación de variables de agrupación dado por <b><code>group_by()</code></b>; si no hay variables de agrupación, la salida tendrá una sola fila que resume todas las observaciones de la entrada. Contendrá una columna para cada variable de agrupación y una columna para cada una de las estadísticas de resumen que haya especificado.</p>
 
<div class="highlight"><pre style="color:#f8f8f2;background-color:#2f3445;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#a5a6aa">## Realizar un conteo de registros por especie</span> 
<span style="color:#ffffff">Mammillaria_15</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">Mammillaria_gbif</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">select</span><span style="color:#c05c30">(</span><span style="color:#ffffff">family</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">species</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLongitude</span><span style="color:#ffffff">,</span>
    <span style="color:#ffffff">country</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">stateProvince</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">year</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">month</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">day</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">verbatimLocality</span><span style="color:#ffffff">,</span> 
    <span style="color:#ffffff">recordedBy</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">identifiedBy</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">filter</span><span style="color:#c05c30">(</span><span style="color:#7fa7bb">!</span><span style="color:#ffffff">is.na</span><span style="color:#c05c30">(</span><span style="color:#ffffff">species</span><span style="color:#c05c30">)</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">group_by</span><span style="color:#c05c30">(</span><span style="color:#ffffff">species</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">count</span><span style="color:#c05c30">(</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">arrange</span><span style="color:#c05c30">(</span><span style="color:#ffffff">n</span><span style="color:#c05c30">)</span>
    
<span style="color:#a5a6aa">## Obtener el maximo y el minimo valor para la Longiud por estado</span> 
<span style="color:#ffffff">Mammillaria_16</span> <span style="color:#7fa7bb">&#60&#45</span> <span style="color:#ffffff">Mammillaria_gbif</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">select</span><span style="color:#c05c30">(</span><span style="color:#ffffff">family</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">species</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLatitude</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">decimalLongitude</span><span style="color:#ffffff">,</span>
    <span style="color:#ffffff">country</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">stateProvince</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">year</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">month</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">day</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">verbatimLocality</span><span style="color:#ffffff">,</span> 
    <span style="color:#ffffff">recordedBy</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">identifiedBy</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">filter</span><span style="color:#c05c30">(</span><span style="color:#7fa7bb">!</span><span style="color:#ffffff">is.na</span><span style="color:#c05c30">(</span><span style="color:#ffffff">stateProvince</span><span style="color:#c05c30">)</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">group_by</span><span style="color:#c05c30">(</span><span style="color:#ffffff">stateProvince</span><span style="color:#c05c30">)</span> <span style="color:#7fa7bb">%>%</span>
    <span style="color:#ffffff">summarise</span><span style="color:#c05c30">(</span><span style="color:#ffffff">minlong</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">min</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLongitude</span><span style="color:#c05c30">)</span><span style="color:#ffffff">,</span> <span style="color:#ffffff">maxlong</span> <span style="color:#7fa7bb">=</span> <span style="color:#ffffff">max</span><span style="color:#c05c30">(</span><span style="color:#ffffff">decimalLongitude</span><span style="color:#c05c30">)</span><span style="color:#c05c30">)</span>
</code></pre></div> 

 <b><p>Ejercicios</p></b>        
        <p>Para realizar los ejercicios descargar los siguentes archivos: <a href="../../files/altura_tallo.csv" download="altura_tallo.csv">Altura de tallos</a>, <a href="../../files/diametro_tallo.txt" download="diametro_tallo.txt">Diametro de tallos</a>, <a href="../../files/distancia_costillas.txt" download="distancia_costillas.txt">Distancia entre costillas</a>, <a href="../../files/Ejercicio_dpyr.r" download="Ejercicio_dpyr.r">Ejercicio dplyr</a>.</p> 
        
      </div>
  </article>

  
  





  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Inicio</a></li>
         
          <li><a href="/apuntes_R/">Apuntes sobre R</a></li>
         
          <li><a href="/temas">Temas</a></li>
         
          <li><a href="/conoceme">Conóceme</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents"></nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
          
  
   <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcristoichkov.github.io%2fapuntes_R%2foperaciones_aritmeticas_basicas%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fcristoichkov.github.io%2fapuntes_R%2foperaciones_aritmeticas_basicas%2f&text=Operaciones%20aritméticas%20básicas">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2020  Cristian Cervantes
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Inicio</a></li>
         
        <li><a href="/apuntes_R/">Apuntes sobre R</a></li>
         
        <li><a href="/temas">Temas</a></li>
         
        <li><a href="/conoceme">Conóceme</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/js/main.js"></script>



</html>
